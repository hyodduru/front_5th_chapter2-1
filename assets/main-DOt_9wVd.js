(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();const y={p1:.1,p2:.15,p3:.2,p4:.05,p5:.25},i=.25,h=.05,g=.2,p=.1,C=30,x=2,T=1e3,S=5,E=3e4,I=6e4,L=[{id:"p1",name:"상품1",price:1e4,quantity:50},{id:"p2",name:"상품2",price:2e4,quantity:30},{id:"p3",name:"상품3",price:3e4,quantity:20},{id:"p4",name:"상품4",price:15e3,quantity:0},{id:"p5",name:"상품5",price:25e3,quantity:10}],r={products:[],productDropdown:null,addToCartButton:null,cartList:null,cartTotalPrice:null,stockStatusMessage:null,lastSelectedProductId:null,bonusPoints:0,totalAmount:0,itemCount:0};function d(){const{productDropdown:e,products:t}=r;e.innerHTML="",t.forEach(a=>{const n=document.createElement("option");n.value=a.id,n.textContent=`${a.name} - ${a.price}원`,a.quantity===0&&(n.disabled=!0),e.appendChild(n)})}function q(){const{cartTotalPrice:e}=r;r.bonusPoints=Math.floor(r.totalAmount/T);let t=document.getElementById("loyalty-points");t||(t=document.createElement("span"),t.id="loyalty-points",t.className="text-blue-500 ml-2",e.appendChild(t)),t.textContent=`(포인트: ${r.bonusPoints})`}function D(){const{stockStatusMessage:e,products:t}=r,a=t.filter(n=>n.quantity<S).map(n=>`${n.name}: ${n.quantity>0?`재고 부족 (${n.quantity}개 남음)`:"품절"}`).join(`
`);e.textContent=a}function N(e,t){const{cartTotalPrice:a}=r;if(a.textContent=`총액: ${Math.round(e)}원`,t>0){const n=document.createElement("span");n.className="text-green-500 ml-2",n.textContent=`(${(t*100).toFixed(1)}% 할인 적용)`,a.appendChild(n)}}function b(e,t,a){let n=0;if(a>=C){const o=e*i,c=e-t;o>c?(t=e*(1-i),n=i):n=c/e}else n=(e-t)/e;return new Date().getDay()===x&&(t*=1-p,n=Math.max(n,p)),r.totalAmount=t,n}function M(e){let t=0,a=0,n=0;return[...e].forEach(o=>{const c=parseInt(o.querySelector("span").textContent.split("x ")[1]),s=r.products.find(f=>f.id===o.id);if(!s)return;const l=s.price*c,m=c>=10&&y[s.id]||0;t+=c,n+=l,a+=l*(1-m)}),{subTotal:n,itemCount:t,totalAmount:a}}function u(){const e=r.cartList.children,{subTotal:t,itemCount:a,totalAmount:n}=M(e);r.itemCount=a,r.totalAmount=n;const o=b(t,n,a);N(r.totalAmount,o),D(),q()}function P(){const{productDropdown:e,products:t}=r,a=e.value,n=t.find(o=>o.id===a);if(n&&n.quantity>0){const o=document.getElementById(n.id);if(o){const c=parseInt(o.querySelector("span").textContent.split("x ")[1])+1;c<=n.quantity?(o.querySelector("span").textContent=`${n.name} - ${n.price}원 x ${c}`,n.quantity--):alert("재고가 부족합니다.")}else{const c=document.createElement("div");c.id=n.id,c.className="flex justify-between items-center mb-2",c.innerHTML=`<span>${n.name} - ${n.price}원 x 1</span>
        <div>
          <button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="${n.id}" data-change="-1">-</button>
          <button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="${n.id}" data-change="1">+</button>
          <button class="remove-item bg-red-500 text-white px-2 py-1 rounded" data-product-id="${n.id}">삭제</button>
        </div>`,r.cartList.appendChild(c),n.quantity--}u(),r.lastSelectedProductId=a}}function v(e,t,a){const n=parseInt(e.dataset.change),o=parseInt(t.querySelector("span").textContent.split("x ")[1]),c=o+n;c>0&&c<=a.quantity+o?(t.querySelector("span").textContent=t.querySelector("span").textContent.split("x ")[0]+"x "+c,a.quantity-=n):c<=0?(t.remove(),a.quantity-=n):alert("재고가 부족합니다.")}function w(e,t){const a=parseInt(e.querySelector("span").textContent.split("x ")[1]);t.quantity+=a,e.remove()}function O(e){const t=e.target;if(!t.classList.contains("quantity-change")&&!t.classList.contains("remove-item"))return;const a=t.dataset.productId,n=document.getElementById(a),o=r.products.find(c=>c.id===a);!o||!n||(t.classList.contains("quantity-change")?v(t,n,o):t.classList.contains("remove-item")&&w(n,o),u())}function A(){const e={container:document.createElement("div"),productWrapper:document.createElement("div"),heading:document.createElement("h1"),cartList:document.createElement("div"),cartTotalPrice:document.createElement("div"),productDropdown:document.createElement("select"),addToCartButton:document.createElement("button"),stockStatusMessage:document.createElement("div")};return e.cartList.id="cart-items",e.cartTotalPrice.id="cart-total",e.productDropdown.id="product-select",e.addToCartButton.id="add-to-cart",e.stockStatusMessage.id="stock-status",e.container.className="bg-gray-100 p-8",e.productWrapper.className="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl p-8",e.heading.className="text-2xl font-bold mb-4",e.cartTotalPrice.className="text-xl font-bold my-4",e.productDropdown.className="border rounded p-2 mr-2",e.addToCartButton.className="bg-blue-500 text-white px-4 py-2 rounded",e.stockStatusMessage.className="text-sm text-gray-500 mt-2",e.heading.textContent="장바구니",e.addToCartButton.textContent="추가",e}function _(e){setTimeout(()=>{setInterval(()=>{const t=e[Math.floor(Math.random()*e.length)];Math.random()<.3&&t.quantity>0&&(t.price=Math.round(t.price*(1-g)),alert(`번개세일! ${t.name}이(가) 20% 할인 중입니다!`),d())},E)},Math.random()*1e4)}function $(e){setTimeout(()=>{setInterval(()=>{if(r.lastSelectedProductId){const t=e.find(a=>a.id!==r.lastSelectedProductId&&a.quantity>0);t&&(alert(`${t.name}은(는) 어떠세요? 지금 구매하시면 5% 추가 할인!`),t.price=Math.round(t.price*(1-h)),d())}},I)},Math.random()*2e4)}function B({addToCartButton:e,cartList:t}){e.addEventListener("click",P),t.addEventListener("click",O)}function R(){r.products=L;const e=document.getElementById("app"),t=A();r.cartList=t.cartList,r.cartTotalPrice=t.cartTotalPrice,r.productDropdown=t.productDropdown,r.addToCartButton=t.addToCartButton,r.stockStatusMessage=t.stockStatusMessage,d(),t.productWrapper.append(t.heading,r.cartList,r.cartTotalPrice,r.productDropdown,r.addToCartButton,r.stockStatusMessage),t.container.appendChild(t.productWrapper),e.appendChild(t.container),u(),B(t),_(r.products),$(r.products)}R();
